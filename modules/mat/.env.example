# ============================================================================
# MAT Module - Environment Variables
# Governance: Section 3.3 (Mandatory)
# WARNING: Never commit actual secrets. This file contains placeholders only.
# ============================================================================

# ──────────────────────────────────────────────────────────────────────────────
# Supabase Configuration
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Supabase project URL for client-side API calls
# Format: https://<project-ref>.supabase.co
# Required: YES
# Source: Platform-generated
VITE_SUPABASE_URL=https://your-project-ref.supabase.co

# Purpose: Supabase anonymous/public key for client-side authentication
# Format: eyJ... (JWT string)
# Required: YES
# Source: Platform-generated
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key

# Purpose: Supabase service role key for server-side operations (bypasses RLS)
# Format: eyJ... (JWT string)
# Required: YES
# Source: Platform-generated
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Purpose: Direct database connection URL for migrations and admin tasks
# Format: postgresql://postgres:<password>@db.<project-ref>.supabase.co:5432/postgres
# Required: YES
# Source: Platform-generated
SUPABASE_DB_URL=postgresql://postgres:your-password@db.your-project-ref.supabase.co:5432/postgres

# Purpose: Supabase project reference ID
# Format: Alphanumeric string (e.g., abcdefghijklmnop)
# Required: YES
# Source: Platform-generated
SUPABASE_PROJECT_REF=your-project-ref

# ──────────────────────────────────────────────────────────────────────────────
# OpenAI Configuration
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: OpenAI API key for AI-assisted features
# Format: sk-... (API key string)
# Required: YES
# Source: Owner-provided
OPENAI_API_KEY=sk-your-openai-api-key

# Purpose: OpenAI organization ID for billing and access control
# Format: org-... (Organization ID string)
# Required: NO
# Source: Owner-provided
OPENAI_ORG_ID=org-your-openai-org-id

# Purpose: Default AI model used for primary AI operations
# Format: Model identifier string (e.g., gpt-4-turbo)
# Required: YES
# Source: Owner-provided
OPENAI_DEFAULT_MODEL=gpt-4-turbo

# Purpose: Fallback AI model when the default model is unavailable
# Format: Model identifier string (e.g., gpt-4o-mini)
# Required: YES
# Source: Owner-provided
OPENAI_FALLBACK_MODEL=gpt-4o-mini

# ──────────────────────────────────────────────────────────────────────────────
# AI Gateway Configuration
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: URL of the AI Gateway service for proxying AI requests
# Format: http(s)://<host>
# Required: YES
# Source: Owner-provided
AI_GATEWAY_URL=http://localhost:8000

# Purpose: Port for the AI Gateway service
# Format: Integer (1-65535)
# Required: YES
# Source: Owner-provided
AI_GATEWAY_PORT=8000

# Purpose: Error rate threshold to trigger the circuit breaker (fraction 0.0-1.0)
# Format: Decimal number (e.g., 0.10)
# Required: YES
# Source: Owner-provided
AI_CIRCUIT_BREAKER_THRESHOLD=0.10

# Purpose: Time window in seconds for circuit breaker error rate calculation
# Format: Integer (seconds)
# Required: YES
# Source: Owner-provided
AI_CIRCUIT_BREAKER_WINDOW_SECONDS=300

# Purpose: Maximum number of retries for failed AI calls
# Format: Integer
# Required: YES
# Source: Owner-provided
AI_MAX_RETRIES=5

# Purpose: Base delay in seconds between AI call retries (exponential backoff)
# Format: Integer (seconds)
# Required: YES
# Source: Owner-provided
AI_RETRY_BASE_DELAY_SECONDS=1

# ──────────────────────────────────────────────────────────────────────────────
# Application Configuration
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Frontend application URL for redirects and link generation
# Format: http(s)://<host>:<port>
# Required: YES
# Source: Owner-provided
VITE_APP_URL=http://localhost:5173

# Purpose: Application environment identifier
# Format: development | staging | production
# Required: YES
# Source: Owner-provided
VITE_APP_ENV=development

# Purpose: Application version for cache busting and diagnostics
# Format: Semantic version (e.g., 0.1.0)
# Required: YES
# Source: Application-generated
VITE_APP_VERSION=0.1.0

# Purpose: Node.js environment flag
# Format: development | production | test
# Required: YES
# Source: Owner-provided
NODE_ENV=development

# ──────────────────────────────────────────────────────────────────────────────
# Authentication
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Comma-separated list of roles that require multi-factor authentication
# Format: Comma-separated role identifiers (e.g., lead_auditor,admin)
# Required: YES
# Source: Owner-provided
VITE_MFA_REQUIRED_ROLES=lead_auditor

# Purpose: Session inactivity timeout before automatic logout
# Format: Integer (minutes)
# Required: YES
# Source: Owner-provided
SESSION_TIMEOUT_MINUTES=30

# Purpose: JWT access token expiry duration
# Format: Integer (seconds)
# Required: YES
# Source: Owner-provided
JWT_EXPIRY_SECONDS=3600

# Purpose: JWT refresh token expiry duration
# Format: Integer (days)
# Required: YES
# Source: Owner-provided
JWT_REFRESH_EXPIRY_DAYS=7

# ──────────────────────────────────────────────────────────────────────────────
# Storage
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Maximum allowed document upload size
# Format: Integer (megabytes)
# Required: YES
# Source: Owner-provided
VITE_MAX_DOCUMENT_SIZE_MB=50

# Purpose: Maximum allowed image upload size
# Format: Integer (megabytes)
# Required: YES
# Source: Owner-provided
VITE_MAX_IMAGE_SIZE_MB=50

# Purpose: Maximum allowed video upload size
# Format: Integer (megabytes)
# Required: YES
# Source: Owner-provided
VITE_MAX_VIDEO_SIZE_MB=500

# Purpose: Maximum allowed audio recording duration
# Format: Integer (minutes)
# Required: YES
# Source: Owner-provided
VITE_MAX_AUDIO_DURATION_MINUTES=120

# Purpose: Storage quota allocated per organisation
# Format: Integer (gigabytes)
# Required: YES
# Source: Owner-provided
STORAGE_QUOTA_PER_ORG_GB=500

# ──────────────────────────────────────────────────────────────────────────────
# Monitoring and Observability
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Sentry Data Source Name for error tracking
# Format: https://<key>@<org>.ingest.sentry.io/<project-id>
# Required: YES
# Source: Platform-generated
SENTRY_DSN=https://your-key@your-org.ingest.sentry.io/your-project-id

# Purpose: Sentry environment tag for filtering events
# Format: development | staging | production
# Required: YES
# Source: Owner-provided
SENTRY_ENVIRONMENT=development

# Purpose: Sentry release identifier for tracking deployments
# Format: Semantic version or commit SHA (e.g., 0.1.0 or abc1234)
# Required: YES
# Source: Application-generated
SENTRY_RELEASE=0.1.0

# Purpose: Threshold for AI refusal rate alerts (fraction 0.0-1.0)
# Format: Decimal number (e.g., 0.15)
# Required: YES
# Source: Owner-provided
WATCHDOG_AI_REFUSAL_THRESHOLD=0.15

# Purpose: Threshold for AI override rate alerts (fraction 0.0-1.0)
# Format: Decimal number (e.g., 0.25)
# Required: YES
# Source: Owner-provided
WATCHDOG_AI_OVERRIDE_THRESHOLD=0.25

# Purpose: Threshold for sync failure rate alerts (fraction 0.0-1.0)
# Format: Decimal number (e.g., 0.05)
# Required: YES
# Source: Owner-provided
WATCHDOG_SYNC_FAILURE_THRESHOLD=0.05

# Purpose: Application logging level
# Format: DEBUG | INFO | WARN | ERROR
# Required: YES
# Source: Owner-provided
LOG_LEVEL=INFO

# Purpose: Application log output format
# Format: json | text
# Required: YES
# Source: Owner-provided
LOG_FORMAT=json

# ──────────────────────────────────────────────────────────────────────────────
# External Integrations
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Base URL of the PIT module for cross-module integration
# Format: http(s)://<host>:<port>
# Required: NO
# Source: Owner-provided
PIT_MODULE_URL=http://localhost:3001

# Purpose: Base URL of the Maturity Roadmap module for cross-module integration
# Format: http(s)://<host>:<port>
# Required: NO
# Source: Owner-provided
MATURITY_ROADMAP_URL=http://localhost:3002

# ──────────────────────────────────────────────────────────────────────────────
# CORS and Security
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Comma-separated list of allowed CORS origins
# Format: Comma-separated URLs (e.g., http://localhost:5173,https://app.example.com)
# Required: YES
# Source: Owner-provided
CORS_ALLOWED_ORIGINS=http://localhost:5173

# Purpose: API rate limit per user per minute
# Format: Integer (requests per minute)
# Required: YES
# Source: Owner-provided
RATE_LIMIT_PER_USER=100

# Purpose: Global API rate limit per minute
# Format: Integer (requests per minute)
# Required: YES
# Source: Owner-provided
RATE_LIMIT_GLOBAL=1000

# ──────────────────────────────────────────────────────────────────────────────
# Video/Audio Processing
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Path to the FFmpeg binary for video/audio processing
# Format: Absolute file path or 'ffmpeg' if on system PATH
# Required: YES
# Source: Owner-provided
FFMPEG_PATH=ffmpeg

# Purpose: Maximum number of concurrent video processing jobs
# Format: Integer
# Required: YES
# Source: Owner-provided
MAX_CONCURRENT_VIDEO_JOBS=2

# ──────────────────────────────────────────────────────────────────────────────
# Data Retention
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Default data retention period for compliance records
# Format: Integer (years)
# Required: YES
# Source: Owner-provided
DEFAULT_RETENTION_YEARS=7

# ──────────────────────────────────────────────────────────────────────────────
# Internationalization
# ──────────────────────────────────────────────────────────────────────────────

# Purpose: Default locale for the application UI
# Format: ISO 639-1 language code (e.g., en, af)
# Required: YES
# Source: Owner-provided
VITE_DEFAULT_LOCALE=en

# Purpose: Comma-separated list of supported locales
# Format: Comma-separated ISO 639-1 codes (e.g., en,af)
# Required: YES
# Source: Owner-provided
VITE_SUPPORTED_LOCALES=en,af
