# Wave 3 Close Evidence Bundle

**Package**: `@maturion/ai-centre`  
**Wave**: 3 — Gateway + Advisory Capability (AIMC)  
**Date**: 2026-02-24  
**Authority**: AAWP v0.1.0 §4, foreman-v2 contract v2.2.0  
**PR**: APGI-cmy/maturion-isms#483  
**Branch**: `copilot/update-specialist-registry-md`

---

## 1. Wave 3 Deliverable Table — All Rows Confirmed PRESENT

| # | AAWP Wave 3 Deliverable | Status | Notes |
|---|---|---|---|
| 1 | `packages/ai-centre/src/gateway/AICentre.ts` (full) | ✅ PRESENT | Pre-existing Wave 2 full implementation; all 7 gateway tests GREEN |
| 2 | `packages/ai-centre/src/routing/CapabilityRouter.ts` | ✅ PRESENT | Pre-existing Wave 2 full implementation; 3 tests GREEN |
| 3 | `packages/ai-centre/src/routing/ProviderHealthRegistry.ts` | ✅ PRESENT | Pre-existing Wave 2 full implementation; 4 tests GREEN |
| 4 | `packages/ai-centre/src/memory/SessionMemoryStore.ts` | ✅ PRESENT | Pre-existing Wave 2 full implementation; 4 tests GREEN |
| 5 | `packages/ai-centre/src/memory/MemoryLifecycle.ts` (session scope) | ✅ PRESENT | Pre-existing Wave 2 full implementation; 3 tests GREEN |
| 6 | `packages/ai-centre/src/personas/PersonaLoader.ts` | ✅ PRESENT | Pre-existing Wave 2 full implementation; 4 tests GREEN |
| 7 | `packages/ai-centre/src/telemetry/TelemetryWriter.ts` (full) | ✅ PRESENT | Pre-existing Wave 2 full implementation; 3 tests GREEN |
| 8 | `packages/ai-centre/src/agents/mat-advisor.md` | ✅ PRESENT | Pre-existing Wave 2 deliverable; PersonaLoader confirms loadable |
| 9 | `packages/ai-centre/src/adapters/GitHubModelsAdapter.ts` | ✅ PRESENT | NEW in PR #483; 4 contract tests GREEN |
| 10 | `packages/ai-centre/src/keys/ProviderKeyStore.ts` | ✅ PRESENT | Pre-existing Wave 2 full implementation; 2 tests GREEN |
| 11 | `.agent-workspace/foreman-v2/knowledge/specialist-registry.md` | ✅ PRESENT | NEW in PR #483; no-builder fallback protocol added |

---

## 2. Test Run Output — OPOJD Gate

```
 Test Files  10 passed (10)
      Tests  39 passed (39)
   Start at  2026-02-24 06:29:16
   Duration  1.29s (transform 300ms, setup 1ms, collect 461ms, tests 76ms)
```

**OPOJD Gate Result**:
- ✅ Zero test failures (0 / 39)
- ✅ Zero skipped tests (0)
- ✅ Zero stub/todo tests (0)
- ✅ Zero deprecation warnings (0)
- ✅ Zero compiler/linter warnings (0)

---

## 3. Test Coverage by Component

| Component | Tests | Status |
|---|---|---|
| `AICentre` Gateway | 7 | ✅ ALL GREEN |
| `CapabilityRouter` | 3 | ✅ ALL GREEN |
| `ProviderHealthRegistry` | 4 | ✅ ALL GREEN |
| `SessionMemoryStore` | 4 | ✅ ALL GREEN |
| `MemoryLifecycle` | 3 | ✅ ALL GREEN |
| `PersistentMemoryAdapter` | 5 | ✅ ALL GREEN |
| `PersonaLoader` | 4 | ✅ ALL GREEN |
| `TelemetryWriter` | 3 | ✅ ALL GREEN |
| `ProviderKeyStore` | 2 | ✅ ALL GREEN |
| `GitHubModelsAdapter` (contract) | 4 | ✅ ALL GREEN |
| **TOTAL** | **39** | **✅ 39/39 GREEN** |

---

## 4. PersonaLoader Confirmation

`PersonaLoader.load('mat-advisor')` confirmed loadable:
- File location: `packages/ai-centre/src/agents/mat-advisor.md`
- Content: Non-empty Markdown with `#` heading — confirmed by `PersonaLoader` tests (all 4 GREEN)
- Path traversal protection: Verified by dedicated test case

---

## 5. End-to-End Advisory Integration

The following integration path is fully implemented and unit-tested:

```typescript
const response = await ai.request({
  capability: 'advisory',
  agent: 'mat-advisor',
  input: { text: 'What is my maturity score?' },
  context: { organisationId: 'org-001', sessionId: 'sess-001' }
});
// Returns AICentreResponse with result.text and result.providerUsed
```

Test evidence: `AICentre Gateway > request() returns AICentreResponse for a valid advisory request` — ✅ GREEN

---

## 6. Key Architecture Compliance Notes

### GRS-015 — Key Management
`GitHubModelsAdapter` obtains its API key exclusively via `ProviderKeyStore.getKey('github-models')`. No direct env var access in the adapter.

### AAD §8.2 — Testability via Dependency Injection
`GitHubModelsAdapter` accepts injectable `keyStore` and `fetchFn` constructor parameters. Contract tests inject mock implementations so no live API calls are made in unit tests.

### GRS-005 — ProviderAdapter Interface
`GitHubModelsAdapter` fully implements `ProviderAdapter` interface: `providerName`, `supportedCapabilities`, `execute()`, `healthCheck()`. All errors wrapped in `ProviderError`.

### GRS-012 — Per-call Telemetry
`TelemetryWriter.write()` is called for every request (success and failure) by `AICentre` gateway. Confirmed by test: `request() writes a TelemetryEvent for every call`.

---

## 7. CS2 Advisory Review Request

Per AAWP Wave 3 quality gate, CS2 advisory review is requested before wave merge:

- All 39 tests GREEN ✅
- OPOJD gate: 0 failures, 0 skipped, 0 warnings ✅
- All Wave 3 deliverables present ✅
- RCA committed to `.agent-workspace/foreman-v2/memory/session-wave3-incomplete-delivery-RCA-20260224.md` ✅
- Wave Completeness Gate added to PREHANDOVER_PROOF template ✅
- BUILD_PROGRESS_TRACKER updated ✅

**CS2 approval checkpoint**: Advisory review of Wave 3 deliverables before wave merge.

---

## 8. Wave 3 Incident Record

See `.agent-workspace/foreman-v2/memory/session-wave3-incomplete-delivery-RCA-20260224.md` for the full RCA of the Wave 3 incomplete delivery incident.

---

**Authority**: AAWP v0.1.0 §4, foreman-v2 contract v2.2.0  
**Produced by**: Copilot (acting as Wave 3 implementation agent)  
**Date**: 2026-02-24
